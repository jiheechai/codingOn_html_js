<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Function, If, For 활용 과제</title>

    <style>
      table tr td {
        width: 50px;
      }
      table tr td button {
        width: 100%;
      }
    </style>

    <script>
      // n, s, r 은 num, sign을 전역변수로 저장한 값.
      // temp는 연산자 누르기 직전의 수를 저장한 전역변수. 혹은 두개 이상의 연산자를 입력했을때, 앞의 연산자까지의 값을 중간 계산한 값의 전역변수.
      let n = 0;
      let temp = 0;
      let s = " "; 


      function setNumber(num) {
        if (s === '.') {
          // ******소수자리수 계산 제외하곤 모두 구현 완료

          // // 소수점 아랫자리수 추가(여러자리수)
          // let i = 0;
          // // 원래의 수(n)를 일의자리수가 될때까지 10을 곱한다. num을 0.1의 자리에 추가
          // while( n % 1 !== 0) {
          //   n = n * 10;
          //   i++;
          // }
          // n = n + (num/10) ;
          // // 다시 원래의 자릿수로 돌려놓는다.
          // for (let j = 0; j < i; j++) {
          //   n = n / 10;
          // }
          // i = 0;
          
          
        } else {
                n = (n * 10) + num; 
        }
        console.log("입력숫자 : " + n);
      
      }


      function setSign(sign) {
        console.log("입력기호 : " + sign);
        // console.log("입력기호타입 : " + typeof(sign));

        // 연산자가 두번 이상 입력될 경우의 전에 입력된 연산자까지의 과정 중간계산
        // (세 개 이상의 수 계산)
        // , =입력시 계산.
        

        if(sign === '=') {calculateResult();}
        else {
              if(s !== " "){
              if (s === '/') { temp = (temp / n);     s = sign; n = 0; } 
              else if (s === '*') { temp = (temp * n);   s = sign; n = 0; } 
              else if (s === '-') { temp = (temp - n);   s = sign; n = 0;} 
              else if (s === '+') { temp = (temp + n);   s = sign; n = 0;} 
              // else if (s === '.') { s = '.';  } 

            } else {
              // 연산자가 한번 입력될 경우(두 개의 수 계산)
                if (sign === '/') { s = '/';   temp = n; n = 0;} 
                else if (sign === '*') { s = '*';   temp = n; n = 0;} 
                else if (sign === '-') { s = '-';   temp = n; n = 0;} 
                else if (sign === '+') { s = '+';   temp = n; n = 0;} 
                else if (sign === '.') { s = '.';  } 
            }
        }

      }

      // =눌렀을때 최종 결과값
      function calculateResult() {
        let result;
        if (s === '/') { result = (temp / n); } 
        else if (s === '*') { result = (temp * n); } 
        else if (s === '-') { result = (temp - n); } 
        else if (s === '+') { result = (temp + n); } 

        temp = 0;
        n = 0;
        s = " "; 

        alert("결과는 : " + result);
        console.log("결과는 : " + result);
      }

      function clearCalculator() {
        temp = 0;
        n = 0;
        s = " "; 
      }
    </script>
  </head>

  <body>
    <table border="1">
      <tr>
        <td colspan="3">
          <button onClick="clearCalculator()">AC</button>
        </td>
        <td>
          <button onClick="setSign('/')">/</button>
        </td>
      </tr>
      <tr>
        <td>
          <button onClick="setNumber(7)">7</button>
        </td>
        <td>
          <button onClick="setNumber(8)">8</button>
        </td>
        <td>
          <button onClick="setNumber(9)">9</button>
        </td>
        <td>
          <button onClick="setSign('*')">*</button>
        </td>
      </tr>
      <tr>
        <td>
          <button onClick="setNumber(4)">4</button>
        </td>
        <td>
          <button onClick="setNumber(5)">5</button>
        </td>
        <td>
          <button onClick="setNumber(6)">6</button>
        </td>
        <td>
          <button onClick="setSign('-')">-</button>
        </td>
      </tr>
      <tr>
        <td>
          <button onClick="setNumber(1)">1</button>
        </td>
        <td>
          <button onClick="setNumber(2)">2</button>
        </td>
        <td>
          <button onClick="setNumber(3)">3</button>
        </td>
        <td>
          <button onClick="setSign('+')">+</button>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <button onClick="setNumber(0)">0</button>
        </td>
        <td>
          <button onClick="setSign('.')">.</button>
        </td>
        <td>
          <button onClick="setSign('=')">=</button>
        </td>
      </tr>
    </table>

    <br />
    <br />
    <br />
    <p style="font-size: 12px">
      [계산기 구현]<br />
      1. table과 button으로 계산기 구현<br /><br />

      [동작 구현] <br />
      1. onClick과 function을 활용할 것<br />
      2. 2가지 방법으로 풀이할 것<br />
      &nbsp;&nbsp;&nbsp;1) eval() 함수 활용<br />
      &nbsp;&nbsp;&nbsp;2) eval() 함수 미활용
    </p>
  </body>
</html>